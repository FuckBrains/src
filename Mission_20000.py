import emaillink
from time import sleep
import random
import os
import time
import sys
import json
import re
from urllib import request, parse
import name_get
import Chrome_driver
import email_imap as imap
import db
import Alliance_login as al


def web_submit(submit,chrome_driver,debug=0):
    # sleep(3000)
    charge_url = 'https://stripchat.com' 
    chrome_driver.quit()
    submit['ua'] = 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36'
    'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36' 
    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36'
    cookie_ = '[{"domain": "stripchat.com", "expiry": 1603670533, "httpOnly": false, "name": "baseAmpl", "path": "/", "secure": false, "value": "%7B%22platform%22%3A%22Web%22%2C%22device_id%22%3A%2269d998f0-6542-4a03-b87d-cdb323e7e68aR%22%2C%22session_id%22%3A1572134303954%2C%22up%22%3A%7B%22page%22%3A%22other%22%7D%7D"}, {"domain": ".stripchat.com", "expiry": 1603670333.160572, "httpOnly": true, "name": "stripchat_com_ABTest_recommended_key", "path": "/", "secure": false, "value": "A"}, {"domain": ".stripchat.com", "expiry": 1603670536, "httpOnly": false, "name": "guestWatchHistoryIds", "path": "/", "secure": false, "value": ""}, {"domain": ".stripchat.com", "expiry": 1574726333.160476, "httpOnly": true, "name": "stripchat_com_sessionRemember", "path": "/", "secure": true, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1635206535, "httpOnly": false, "name": "_ga", "path": "/", "secure": false, "value": "GA1.2.956464000.1572134308"}, {"domain": ".stripchat.com", "expiry": 1574726333.160436, "httpOnly": true, "name": "stripchat_com_sessionId", "path": "/", "secure": true, "value": "56554b5d2aaa15b2da5d123eb3fb5ef7d92f99b9d5f1679b8ac2173bae49"}, {"domain": ".stripchat.com", "expiry": 1887494536, "httpOnly": false, "name": "amplitude_id_19a23394adaadec51c3aeee36622058dstripchat.com", "path": "/", "secure": false, "value": "eyJkZXZpY2VJZCI6IjY5ZDk5OGYwLTY1NDItNGEwMy1iODdkLWNkYjMyM2U3ZTY4YVIiLCJ1c2VySWQiOiIyMjMzNTAzNSIsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTU3MjEzNDMwMzk1NCwibGFzdEV2ZW50VGltZSI6MTU3MjEzNDUzNjIwNiwiZXZlbnRJZCI6MCwiaWRlbnRpZnlJZCI6MTIsInNlcXVlbmNlTnVtYmVyIjoxMn0="}, {"domain": ".stripchat.com", "expiry": 1603670334.892543, "httpOnly": true, "name": "stripchat_com_modelLandingNamespace", "path": "/", "secure": false, "value": "none"}, {"domain": "stripchat.com", "expiry": 1603670307, "httpOnly": false, "name": "alreadyVisited", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1572220935, "httpOnly": false, "name": "_gid", "path": "/", "secure": false, "value": "GA1.2.1854734341.1572134308"}, {"domain": ".stripchat.com", "expiry": 1572134595, "httpOnly": false, "name": "_gat", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1603670536, "httpOnly": false, "name": "isVisitorsAgreementAccepted", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1579910536.139166, "httpOnly": true, "name": "stripchat_com_affiliateId", "path": "/", "secure": false, "value": "0304a28f14de507aded5f095be49e856b1988fb7f51569d2b6510af70b4f1a50"}]'
    '[{"domain": "stripchat.com", "expiry": 1603616633, "httpOnly": false, "name": "baseAmpl", "path": "/", "secure": false, "value": "%7B%22platform%22%3A%22Web%22%2C%22device_id%22%3A%228161db5f-3ccf-4a48-901c-9da944cb0ef1R%22%2C%22session_id%22%3A1572080537625%2C%22up%22%3A%7B%22page%22%3A%22other%22%7D%7D"}, {"domain": ".stripchat.com", "expiry": 1603616551.215277, "httpOnly": true, "name": "stripchat_com_ABTest_recommended_key", "path": "/", "secure": false, "value": "A"}, {"domain": ".stripchat.com", "expiry": 1603616635, "httpOnly": false, "name": "guestWatchHistoryIds", "path": "/", "secure": false, "value": ""}, {"domain": ".stripchat.com", "expiry": 1574672582.728661, "httpOnly": true, "name": "stripchat_com_sessionRemember", "path": "/", "secure": true, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1635152635, "httpOnly": false, "name": "_ga", "path": "/", "secure": false, "value": "GA1.2.1236301354.1572080538"}, {"domain": ".stripchat.com", "expiry": 1574672582.728581, "httpOnly": true, "name": "stripchat_com_sessionId", "path": "/", "secure": true, "value": "cb719aa67d5ca81fa15b9907c41cdc4c6a0e287ebab2d07f3ee9531099f6"}, {"domain": "stripchat.com", "expiry": 1603616536, "httpOnly": false, "name": "alreadyVisited", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1572167035, "httpOnly": false, "name": "_gid", "path": "/", "secure": false, "value": "GA1.2.1175804656.1572080538"}, {"domain": ".stripchat.com", "expiry": 1572080695, "httpOnly": false, "name": "_gat", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1603616635, "httpOnly": false, "name": "isVisitorsAgreementAccepted", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1887440636, "httpOnly": false, "name": "amplitude_id_19a23394adaadec51c3aeee36622058dstripchat.com", "path": "/", "secure": false, "value": "eyJkZXZpY2VJZCI6IjgxNjFkYjVmLTNjY2YtNGE0OC05MDFjLTlkYTk0NGNiMGVmMVIiLCJ1c2VySWQiOiIyMjMxMTEyOSIsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTU3MjA4MDUzNzYyNSwibGFzdEV2ZW50VGltZSI6MTU3MjA4MDYzNjA1NywiZXZlbnRJZCI6MCwiaWRlbnRpZnlJZCI6OSwic2VxdWVuY2VOdW1iZXIiOjl9"}, {"domain": ".stripchat.com", "expiry": 1603616552.38706, "httpOnly": true, "name": "stripchat_com_modelLandingNamespace", "path": "/", "secure": false, "value": "none"}, {"domain": ".stripchat.com", "expiry": 1579856635.609866, "httpOnly": true, "name": "stripchat_com_affiliateId", "path": "/", "secure": false, "value": "9ffb8882d338b0418577b4dbd9443d8dc2a4caaae336fb4abd591bcd85bbdd14"}]'
    '[{"domain": "stripchat.com", "expiry": 1603595364, "httpOnly": false, "name": "baseAmpl", "path": "/", "secure": false, "value": "%7B%22platform%22%3A%22Web%22%2C%22device_id%22%3A%22317e4c87-8df9-4b54-9446-f77f57602596R%22%2C%22session_id%22%3A1572059293344%2C%22up%22%3A%7B%22page%22%3A%22other%22%7D%7D"}, {"domain": ".stripchat.com", "expiry": 253402257600, "httpOnly": false, "name": "G_ENABLED_IDPS", "path": "/", "secure": false, "value": "google"}, {"domain": ".stripchat.com", "expiry": 1603595310.799482, "httpOnly": true, "name": "stripchat_com_ABTest_recommended_key", "path": "/", "secure": false, "value": "B"}, {"domain": ".stripchat.com", "expiry": 1603595366, "httpOnly": false, "name": "guestWatchHistoryIds", "path": "/", "secure": false, "value": ""}, {"domain": ".stripchat.com", "expiry": 1574651367.357194, "httpOnly": true, "name": "stripchat_com_sessionRemember", "path": "/", "secure": true, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1635131364, "httpOnly": false, "name": "_ga", "path": "/", "secure": false, "value": "GA1.2.1612473542.1572059296"}, {"domain": ".stripchat.com", "expiry": 1574651367.357134, "httpOnly": true, "name": "stripchat_com_sessionId", "path": "/", "secure": true, "value": "3564ce325fbb02302b983e519f2eae71370e174463fe984d0f09331f4bee"}, {"domain": "stripchat.com", "expiry": 1603595292, "httpOnly": false, "name": "alreadyVisited", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1572145764, "httpOnly": false, "name": "_gid", "path": "/", "secure": false, "value": "GA1.2.1412774572.1572059296"}, {"domain": ".stripchat.com", "expiry": 1572059424, "httpOnly": false, "name": "_gat", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1603595366, "httpOnly": false, "name": "isVisitorsAgreementAccepted", "path": "/", "secure": false, "value": "1"}, {"domain": ".stripchat.com", "expiry": 1887419366, "httpOnly": false, "name": "amplitude_id_19a23394adaadec51c3aeee36622058dstripchat.com", "path": "/", "secure": false, "value": "eyJkZXZpY2VJZCI6IjMxN2U0Yzg3LThkZjktNGI1NC05NDQ2LWY3N2Y1NzYwMjU5NlIiLCJ1c2VySWQiOiIyMjMwMjU1MCIsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTU3MjA1OTI5MzM0NCwibGFzdEV2ZW50VGltZSI6MTU3MjA1OTM2NjcxNiwiZXZlbnRJZCI6MCwiaWRlbnRpZnlJZCI6OSwic2VxdWVuY2VOdW1iZXIiOjl9"}, {"domain": ".stripchat.com", "expiry": 1603595311.533089, "httpOnly": true, "name": "stripchat_com_modelLandingNamespace", "path": "/", "secure": false, "value": "none"}, {"domain": ".stripchat.com", "expiry": 1579835366.273746, "httpOnly": true, "name": "stripchat_com_affiliateId", "path": "/", "secure": false, "value": "fad79d336d6946ea1a219269e0fd7d68473eae7f956522fe3dfc3a3d4690b1e6"}]'
    chrome_driver = al.get_chrome(1,submit,1)
    sleep(5)
    try:
        chrome_driver.get(charge_url)
    except Exception as e:
        pass
    # ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36'
    # '[{"domain": "stripchat.com", "expiry": 1601076835, "httpOnly": false, "name": "baseAmpl", "path": "/", "secure": false, "value": "%7B%22platform%22%3A%22Web%22%2C%22device_id%22%3A%22efa71f11-5b2b-4fd7-8cba-3cde6e9d68bcR%22%2C%22session_id%22%3A1569540701404%2C%22up%22%3A%7B%22page%22%3A%22view%22%2C%22navigationParams%22%3A%7B%22limit%22%3A60%2C%22offset%22%3A0%7D%7D%7D"}, {"domain": "stripchat.com", "expiry": 1569540883, "httpOnly": false, "name": "_gat", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1601076826, "httpOnly": false, "name": "guestWatchHistoryIds", "path": "/", "secure": false, "value": ""}, {"domain": "stripchat.com", "expiry": 1601076728.51081, "httpOnly": true, "name": "stripchat_com_ABTest_recommended_key", "path": "/", "secure": false, "value": "B"}, {"domain": "stripchat.com", "expiry": 1601076837, "httpOnly": false, "name": "guestSubscriptionIds", "path": "/", "secure": false, "value": ""}, {"domain": "stripchat.com", "expiry": 253402257600, "httpOnly": false, "name": "G_ENABLED_IDPS", "path": "/", "secure": false, "value": "google"}, {"domain": "stripchat.com", "expiry": 1884900826, "httpOnly": false, "name": "amplitude_id_19a23394adaadec51c3aeee36622058dstripchat.com", "path": "/", "secure": false, "value": "eyJkZXZpY2VJZCI6ImVmYTcxZjExLTViMmItNGZkNy04Y2JhLTNjZGU2ZTlkNjhiY1IiLCJ1c2VySWQiOiIyMTM3MjkzNiIsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTU2OTU0MDcwMTQwNCwibGFzdEV2ZW50VGltZSI6MTU2OTU0MDgyNjExMCwiZXZlbnRJZCI6MCwiaWRlbnRpZnlJZCI6MTIsInNlcXVlbmNlTnVtYmVyIjoxMn0="}, {"domain": "stripchat.com", "expiry": 1601076729.181505, "httpOnly": true, "name": "stripchat_com_modelLandingNamespace", "path": "/", "secure": false, "value": "none"}, {"domain": "stripchat.com", "expiry": 1569627222, "httpOnly": false, "name": "_gid", "path": "/", "secure": false, "value": "GA1.2.932696838.1569540709"}, {"domain": "stripchat.com", "expiry": 1632612822, "httpOnly": false, "name": "_ga", "path": "/", "secure": false, "value": "GA1.2.10473711.1569540709"}, {"domain": "stripchat.com", "expiry": 1572132836.650854, "httpOnly": true, "name": "stripchat_com_sessionRemember", "path": "/", "secure": true, "value": "1"}, {"domain": "stripchat.com", "expiry": 1572132836.650779, "httpOnly": true, "name": "stripchat_com_sessionId", "path": "/", "secure": true, "value": "c4a02135c1a137a970aa76e5f5a7a027663bb69720c263a6f88e5a06cd73"}, {"domain": "stripchat.com", "expiry": 1601076703, "httpOnly": false, "name": "alreadyVisited", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1601076826, "httpOnly": false, "name": "isVisitorsAgreementAccepted", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1577316826.006714, "httpOnly": true, "name": "stripchat_com_affiliateId", "path": "/", "secure": false, "value": "8c5fbd8334d6294e9d3c81eae94c875f3e78fce003a15abc1b9359b46d718881"}]'
    # '[{"domain": "stripchat.com", "expiry": 1601070221, "httpOnly": false, "name": "baseAmpl", "path": "/", "secure": false, "value": "%7B%22platform%22%3A%22Web%22%2C%22device_id%22%3A%226a282067-19d4-4421-952c-3db747efea95R%22%2C%22session_id%22%3A1569534141985%2C%22up%22%3A%7B%22page%22%3A%22view%22%2C%22navigationParams%22%3A%7B%22limit%22%3A60%2C%22offset%22%3A0%7D%7D%7D"}, {"domain": "stripchat.com", "expiry": 1569534268, "httpOnly": false, "name": "_gat", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1601070210, "httpOnly": false, "name": "guestWatchHistoryIds", "path": "/", "secure": false, "value": ""}, {"domain": "stripchat.com", "expiry": 1601070153.547113, "httpOnly": true, "name": "stripchat_com_ABTest_recommended_key", "path": "/", "secure": false, "value": "B"}, {"domain": "stripchat.com", "expiry": 1569620606, "httpOnly": false, "name": "_gid", "path": "/", "secure": false, "value": "GA1.2.1856081617.1569534142"}, {"domain": "stripchat.com", "expiry": 1632606206, "httpOnly": false, "name": "_ga", "path": "/", "secure": false, "value": "GA1.2.1611630164.1569534142"}, {"domain": "stripchat.com", "expiry": 1572126153.547009, "httpOnly": true, "name": "stripchat_com_sessionRemember", "path": "/", "secure": true, "value": "1"}, {"domain": "stripchat.com", "expiry": 1572126153.546937, "httpOnly": true, "name": "stripchat_com_sessionId", "path": "/", "secure": true, "value": "272f522136e750cb2a8c0442f0aa72cd477e8871fcacfdf1167e53d2a0a2"}, {"domain": "stripchat.com", "expiry": 1601070141, "httpOnly": false, "name": "alreadyVisited", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1601070210, "httpOnly": false, "name": "isVisitorsAgreementAccepted", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1601070223, "httpOnly": false, "name": "guestSubscriptionIds", "path": "/", "secure": false, "value": ""}, {"domain": "stripchat.com", "expiry": 253402257600, "httpOnly": false, "name": "G_ENABLED_IDPS", "path": "/", "secure": false, "value": "google"}, {"domain": "stripchat.com", "expiry": 1884894210, "httpOnly": false, "name": "amplitude_id_19a23394adaadec51c3aeee36622058dstripchat.com", "path": "/", "secure": false, "value": "eyJkZXZpY2VJZCI6IjZhMjgyMDY3LTE5ZDQtNDQyMS05NTJjLTNkYjc0N2VmZWE5NVIiLCJ1c2VySWQiOiIyMTM3MDE5MiIsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTU2OTUzNDE0MTk4NSwibGFzdEV2ZW50VGltZSI6MTU2OTUzNDIxMDQ2NCwiZXZlbnRJZCI6MCwiaWRlbnRpZnlJZCI6OSwic2VxdWVuY2VOdW1iZXIiOjl9"}, {"domain": "stripchat.com", "expiry": 1601070156.621534, "httpOnly": true, "name": "stripchat_com_modelLandingNamespace", "path": "/", "secure": false, "value": "none"}, {"domain": "stripchat.com", "expiry": 1577310210.307239, "httpOnly": true, "name": "stripchat_com_affiliateId", "path": "/", "secure": false, "value": "4352993dbaf2074c189708f1b2aee35c6d43695573bcf88913fa9c318f3f08dd"}]' 
    # '[{"domain": "stripchat.com", "expiry": 1600716196, "httpOnly": false, "name": "baseAmpl", "path": "/", "secure": false, "value": "%7B%22platform%22%3A%22Web%22%2C%22device_id%22%3A%225949384b-41ac-42e8-a445-418bb76ce912R%22%2C%22session_id%22%3A1569180105643%2C%22up%22%3A%7B%22page%22%3A%22view%22%2C%22navigationParams%22%3A%7B%22limit%22%3A60%2C%22offset%22%3A0%7D%7D%7D"}, {"domain": "stripchat.com", "expiry": 1569180243, "httpOnly": false, "name": "_gat", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1600716185, "httpOnly": false, "name": "guestWatchHistoryIds", "path": "/", "secure": false, "value": ""}, {"domain": "stripchat.com", "expiry": 1600716124.14764, "httpOnly": true, "name": "stripchat_com_ABTest_recommended_key", "path": "/", "secure": false, "value": "B"}, {"domain": "stripchat.com", "expiry": 1569266581, "httpOnly": false, "name": "_gid", "path": "/", "secure": false, "value": "GA1.2.572702782.1569180106"}, {"domain": "stripchat.com", "expiry": 1632252181, "httpOnly": false, "name": "_ga", "path": "/", "secure": false, "value": "GA1.2.54903429.1569180106"}, {"domain": "stripchat.com", "expiry": 1571772198.044346, "httpOnly": true, "name": "stripchat_com_sessionRemember", "path": "/", "secure": true, "value": "1"}, {"domain": "stripchat.com", "expiry": 1571772198.044113, "httpOnly": true, "name": "stripchat_com_sessionId", "path": "/", "secure": true, "value": "f97a85844eae195aa598cc7c9134a5e6a19a64e139be5f0c2e1e8a78404a"}, {"domain": "stripchat.com", "expiry": 1600716105, "httpOnly": false, "name": "alreadyVisited", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1600716185, "httpOnly": false, "name": "isVisitorsAgreementAccepted", "path": "/", "secure": false, "value": "1"}, {"domain": "stripchat.com", "expiry": 1600716198, "httpOnly": false, "name": "guestSubscriptionIds", "path": "/", "secure": false, "value": ""}, {"domain": "stripchat.com", "expiry": 253402257600, "httpOnly": false, "name": "G_ENABLED_IDPS", "path": "/", "secure": false, "value": "google"}, {"domain": "stripchat.com", "expiry": 1884540186, "httpOnly": false, "name": "amplitude_id_19a23394adaadec51c3aeee36622058dstripchat.com", "path": "/", "secure": false, "value": "eyJkZXZpY2VJZCI6IjU5NDkzODRiLTQxYWMtNDJlOC1hNDQ1LTQxOGJiNzZjZTkxMlIiLCJ1c2VySWQiOiIyMTIyNjU5MCIsIm9wdE91dCI6ZmFsc2UsInNlc3Npb25JZCI6MTU2OTE4MDEwNTY0MywibGFzdEV2ZW50VGltZSI6MTU2OTE4MDE4NjA1MywiZXZlbnRJZCI6MCwiaWRlbnRpZnlJZCI6OSwic2VxdWVuY2VOdW1iZXIiOjl9"}, {"domain": "stripchat.com", "expiry": 1600716125.042566, "httpOnly": true, "name": "stripchat_com_modelLandingNamespace", "path": "/", "secure": false, "value": "none"}, {"domain": "stripchat.com", "expiry": 1576956185.479051, "httpOnly": true, "name": "stripchat_com_affiliateId", "path": "/", "secure": false, "value": "1240cbd3455450b5c499e77219039717203959411ca4f7e1d644be59ffb037fc"}]'
    cookies = json.loads(cookie_)
    for cookie in cookies:
        if 'expiry' in cookie:
            cookie['expiry'] = int(cookie['expiry']) 
        chrome_driver.add_cookie(cookie)    
    chrome_driver.get(charge_url)
    # print(abc)
    sleep(3000)
    